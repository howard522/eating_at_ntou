name: Sync upstream dev (force)

on:
  workflow_dispatch:
  schedule:
    - cron: "*/30 * * * *" # 每 30 分鐘一次（想改再改）

permissions:
  contents: write

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout fork dev
        uses: actions/checkout@v4
        with:
          ref: dev
          fetch-depth: 0

      - name: Add upstream and fetch dev
        run: |
          git remote add upstream https://github.com/howard522/eating_at_ntou.git
          git fetch upstream dev
          git fetch origin dev

      - name: Force dev to match upstream/dev
        run: |
          git checkout dev
          git reset --hard upstream/dev

      - name: Push to fork
        run: |
          git push origin dev --force
